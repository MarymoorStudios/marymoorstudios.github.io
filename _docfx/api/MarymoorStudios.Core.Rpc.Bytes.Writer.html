<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class Bytes.Writer </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class Bytes.Writer ">
      
      <meta name="description" content="The writer capability for a .">
      <link rel="icon" href="../logo.svg">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="https://marymoorstudios.com">
            <img id="logo" class="svg" src="../logo.svg" alt="Marymoor Studios Core">
            Marymoor Studios Core
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer">



  <h1 id="MarymoorStudios_Core_Rpc_Bytes_Writer" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer" class="text-break">
Class Bytes.Writer  
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="MarymoorStudios.html">MarymoorStudios</a>.<a class="xref" href="MarymoorStudios.Core.html">Core</a>.<a class="xref" href="MarymoorStudios.Core.Rpc.html">Rpc</a></dd></dl>
  <dl><dt>Assembly</dt><dd>MarymoorStudios.Core.Rpc.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>The writer capability for a <a class="xref" href="MarymoorStudios.Core.Rpc.Bytes.html">Bytes</a>.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public sealed class Bytes.Writer : IPromiseDisposable, IDisposable</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">Bytes.Writer</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="MarymoorStudios.Core.Promises.IPromiseDisposable.html">IPromiseDisposable</a></div>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.idisposable">IDisposable</a></div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="methods">Methods
</h2>


  <a id="MarymoorStudios_Core_Rpc_Bytes_Writer_Abort_" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Abort*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Bytes_Writer_Abort" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Abort">
  Abort()
  
  </h3>

  <div class="markdown level1 summary"><p>Promptly aborts the sequence.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Abort()</code></pre>
  </div>









  <h4 class="section" id="MarymoorStudios_Core_Rpc_Bytes_Writer_Abort_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>Write initiated abort is best-effort transmitted across the transport to the reader.  If the
transport has itself been aborted then the abort signal is discarded (but the reader will see an abort from
the transport).  Any items in flight that cannot be transmitted before the transport has been torn down are
immediately released.</p>
</div>




  <a id="MarymoorStudios_Core_Rpc_Bytes_Writer_Close_" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Close*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Bytes_Writer_Close_System_Exception_" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Close(System.Exception)">
  Close(Exception?)
  
  </h3>

  <div class="markdown level1 summary"><p>Terminates the sequence.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Promise Close(Exception? error = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>error</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.exception">Exception</a></dt>
    <dd><p>An optional error to terminate the sequence with.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="MarymoorStudios.Core.Promises.Promise.html">Promise</a></dt>
    <dd><p>A promise that resolves when the reader has seen the entire sequence.</p>
</dd>
  </dl>







  <h4 class="section" id="MarymoorStudios_Core_Rpc_Bytes_Writer_Close_System_Exception__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>If the sequence is terminated without an error (a successful termination) the reader will see an End
of Sequence (EOS).  If an error is provided, the reader will eventually see that error as the result of a
call to <a class="xref" href="MarymoorStudios.Core.Rpc.PipeReader-1.html#MarymoorStudios_Core_Rpc_PipeReader_1_Read">Read()</a>.</p>
</div>




  <a id="MarymoorStudios_Core_Rpc_Bytes_Writer_Dispose_" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Dispose*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Bytes_Writer_Dispose" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Dispose">
  Dispose()
  
  </h3>

  <div class="markdown level1 summary"><p>Promptly terminates the sequence.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Dispose()</code></pre>
  </div>









  <h4 class="section" id="MarymoorStudios_Core_Rpc_Bytes_Writer_Dispose_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>If the sequence is already terminated or a graceful <a class="xref" href="MarymoorStudios.Core.Rpc.Bytes.Writer.html#MarymoorStudios_Core_Rpc_Bytes_Writer_Close_System_Exception_">Close(Exception?)</a> can be promptly transmitted
on the transport, it is done. Otherwise, an <a class="xref" href="MarymoorStudios.Core.Rpc.Bytes.Writer.html#MarymoorStudios_Core_Rpc_Bytes_Writer_Abort">Abort()</a> occurs.  If any untransmitted items cannot be
promptly transmitted they are released without being transmitted and the termination becomes an
<a class="xref" href="MarymoorStudios.Core.Rpc.Bytes.Writer.html#MarymoorStudios_Core_Rpc_Bytes_Writer_Abort">Abort()</a>.</p>
</div>




  <a id="MarymoorStudios_Core_Rpc_Bytes_Writer_DisposeAsync_" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.DisposeAsync*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Bytes_Writer_DisposeAsync" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.DisposeAsync">
  DisposeAsync()
  
  </h3>

  <div class="markdown level1 summary"><p>Asynchronously terminates the sequence.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Promise DisposeAsync()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="MarymoorStudios.Core.Promises.Promise.html">Promise</a></dt>
    <dd></dd>
  </dl>







  <h4 class="section" id="MarymoorStudios_Core_Rpc_Bytes_Writer_DisposeAsync_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
If the sequence is not already terminated, a graceful <a class="xref" href="MarymoorStudios.Core.Rpc.Bytes.Writer.html#MarymoorStudios_Core_Rpc_Bytes_Writer_Close_System_Exception_">Close(Exception?)</a> is performed.  The result
then resolves after a graceful termination acknowledgement is received from the reader (indicating that all
items have been received including the graceful termination signal).
</p>
<p>
If the transport is torn down before all pending items can be transmitted, or before a graceful
termination acknowledgement has been received from the reader, then any untransmitted items are released
without being transmitted and the termination becomes an <a class="xref" href="MarymoorStudios.Core.Rpc.Bytes.Writer.html#MarymoorStudios_Core_Rpc_Bytes_Writer_Abort">Abort()</a>.
</p>
</div>




  <a id="MarymoorStudios_Core_Rpc_Bytes_Writer_Finalize_" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Finalize*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Bytes_Writer_Finalize" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Finalize">
  ~Writer()
  
  </h3>

  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected ~Writer()</code></pre>
  </div>













  <a id="MarymoorStudios_Core_Rpc_Bytes_Writer_Flush_" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Flush*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Bytes_Writer_Flush" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Flush">
  Flush()
  
  </h3>

  <div class="markdown level1 summary"><p>Returns a promise that resolves when flow control would allow additional writes without buffering.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Promise Flush()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="MarymoorStudios.Core.Promises.Promise.html">Promise</a></dt>
    <dd></dd>
  </dl>







  <h4 class="section" id="MarymoorStudios_Core_Rpc_Bytes_Writer_Flush_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>If there is no flow control pressure the return value will be promptly resolved.</p>
</div>




  <a id="MarymoorStudios_Core_Rpc_Bytes_Writer_Write_" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Write*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Bytes_Writer_Write_MarymoorStudios_Core_OwnedMem_System_Byte__" data-uid="MarymoorStudios.Core.Rpc.Bytes.Writer.Write(MarymoorStudios.Core.OwnedMem{System.Byte})">
  Write(OwnedMem&lt;byte&gt;)
  
  </h3>

  <div class="markdown level1 summary"><p>Writes an item to the sequence.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Write(OwnedMem&lt;byte&gt; item)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>item</code> <a class="xref" href="https://dev.azure.com/marymoorstudios/Game/_apis/git/repositories/Game/items?api-version=1.0&amp;versionType=commit&amp;version=e9f801662f64c931636fa752de7bbaf071ead4ef&amp;path=/Core/MarymoorStudios.Core/OwnedMem.cs">OwnedMem</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.byte">byte</a>&gt;</dt>
    <dd><p>The item to be written.</p>
</dd>
  </dl>








  <h4 class="section" id="MarymoorStudios_Core_Rpc_Bytes_Writer_Write_MarymoorStudios_Core_OwnedMem_System_Byte___remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
On a successful return, ownership of the provided item is transferred to the sequence.  Items
successfully written to the sequence but never delivered to a reader (e.g. because the sequence is disposed
or the transport is terminated) will be disposed by the sequence itself.
</p>
<p>
The error <a class="xref" href="MarymoorStudios.Core.Rpc.Exceptions.EndOfSequenceException.html">EndOfSequenceException</a> occurs when the Writer comes to know that the sequence
has been disposed before the EOS has been written.  This error will be thrown repeatedly on all subsequent
writes after this point.  The Writer should gracefully terminate production.
</p>
<p>
If the sequence is cancelled by the reader (optionally with an error),
<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.operationcanceledexception">OperationCanceledException</a>) (or that error) will be returned by the next call to
<a class="xref" href="MarymoorStudios.Core.Rpc.Bytes.Writer.html#MarymoorStudios_Core_Rpc_Bytes_Writer_Write_MarymoorStudios_Core_OwnedMem_System_Byte__">Write(OwnedMem&lt;byte&gt;)</a> or <a class="xref" href="MarymoorStudios.Core.Rpc.Bytes.Writer.html#MarymoorStudios_Core_Rpc_Bytes_Writer_Flush">Flush()</a> after the Writer <bold>comes to know</bold> of the cancellation.
Cancellation is propagated asynchronously backward through the transport and may be subject to propagation
delay.  Cancellation delivery cannot be guaranteed as it may be lost if the underlying channel is aborted
before it can be delivered.
</p>
<p>
If the sequence is aborted by the reader or the underlying transport, a call to <a class="xref" href="MarymoorStudios.Core.Rpc.Bytes.Writer.html#MarymoorStudios_Core_Rpc_Bytes_Writer_Write_MarymoorStudios_Core_OwnedMem_System_Byte__">Write(OwnedMem&lt;byte&gt;)</a> or
<a class="xref" href="MarymoorStudios.Core.Rpc.Bytes.Writer.html#MarymoorStudios_Core_Rpc_Bytes_Writer_Flush">Flush()</a> will yield an <a class="xref" href="MarymoorStudios.Core.Rpc.Exceptions.AbortedException.html">AbortedException</a>.  Some items in the sequence may have been
lost in the event of an abort.
</p>
</div>





</article>



      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
