<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class UserIdentity </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class UserIdentity ">
      
      <meta name="description" content="The identity of an RPC peer.">
      <link rel="icon" href="../logo.svg">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="https://marymoorstudios.com">
            <img id="logo" class="svg" src="../logo.svg" alt="Marymoor Studios Core">
            Marymoor Studios Core
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity">



  <h1 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity" class="text-break">
Class UserIdentity  
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="MarymoorStudios.html">MarymoorStudios</a>.<a class="xref" href="MarymoorStudios.Core.html">Core</a>.<a class="xref" href="MarymoorStudios.Core.Rpc.html">Rpc</a>.<a class="xref" href="MarymoorStudios.Core.Rpc.Identity.html">Identity</a></dd></dl>
  <dl><dt>Assembly</dt><dd>MarymoorStudios.Core.Rpc.Identity.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>The identity of an RPC peer.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[DataContract]
public sealed class UserIdentity</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">UserIdentity</span></div>
    </dd>
  </dl>



  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity__ctor_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.#ctor*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity__ctor_System_String_System_String_System_ReadOnlyMemory_System_Byte__System_DateTime_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.#ctor(System.String,System.String,System.ReadOnlyMemory{System.Byte},System.DateTime)">
  UserIdentity(string, string, ReadOnlyMemory&lt;byte&gt;, DateTime)
  
  </h3>

  <div class="markdown level1 summary"><p>Constructor.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public UserIdentity(string name, string email, ReadOnlyMemory&lt;byte&gt; publicKey, DateTime created)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>name</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
    <dt><code>email</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
    <dt><code>publicKey</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.readonlymemory-1">ReadOnlyMemory</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.byte">byte</a>&gt;</dt>
    <dd></dd>
    <dt><code>created</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.datetime">DateTime</a></dt>
    <dd></dd>
  </dl>












  <h2 class="section" id="fields">Fields
</h2>



  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_AuthScopeUri" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.AuthScopeUri">
  AuthScopeUri
  
  </h3>

  <div class="markdown level1 summary"><p>URI that MUST appear as a claim in a SubjectAlternativeNameExtension of any valid certificate.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static readonly Uri AuthScopeUri</code></pre>
  </div>




  <h4 class="section">Field Value</h4>
  <dl class="parameters">
    <dt><span class="xref">Uri</span></dt>
    <dd></dd>
  </dl>










  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_AuthenticationId" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.AuthenticationId">
  AuthenticationId
  
  </h3>

  <div class="markdown level1 summary"><p>The name of the MSC authentication protocol.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public const string AuthenticationId = &quot;MarymoorStudios Authentication&quot;</code></pre>
  </div>




  <h4 class="section">Field Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>









  <h2 class="section" id="properties">Properties
</h2>


  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_Created_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.Created*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_Created" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.Created">
  Created
  
  </h3>

  <div class="markdown level1 summary"><p>Date the identity was created.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[DataMember]
public DateTime Created { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.datetime">DateTime</a></dt>
    <dd></dd>
  </dl>








  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_Email_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.Email*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_Email" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.Email">
  Email
  
  </h3>

  <div class="markdown level1 summary"><p>User's email address.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[DataMember]
public string Email { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>




  <h4 class="section" id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_Email_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>Email may not be unique.  May be attested, but still not unique.  The same user can have multiple
user identities with different public keys but the same email.  (E.g. during certificate renewal.)</p>
</div>




  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_Name_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.Name*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_Name" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.Name">
  Name
  
  </h3>

  <div class="markdown level1 summary"><p>User's display name.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[DataMember]
public string Name { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>




  <h4 class="section" id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_Name_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>Display name may not be unique.</p>
</div>




  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_PublicKey_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.PublicKey*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_PublicKey" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.PublicKey">
  PublicKey
  
  </h3>

  <div class="markdown level1 summary"><p>User's public key.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[DataMember]
public ReadOnlyMemory&lt;byte&gt; PublicKey { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.readonlymemory-1">ReadOnlyMemory</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.byte">byte</a>&gt;</dt>
    <dd></dd>
  </dl>




  <h4 class="section" id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_PublicKey_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>Globally unique identity.</p>
</div>




  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_X500DistinguishedName_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.X500DistinguishedName*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_X500DistinguishedName" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.X500DistinguishedName">
  X500DistinguishedName
  
  </h3>

  <div class="markdown level1 summary"><p>Returns the X500 distinguished name for this identity.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public X500DistinguishedName X500DistinguishedName { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.security.cryptography.x509certificates.x500distinguishedname">X500DistinguishedName</a></dt>
    <dd></dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_CreateIdentityCertificate_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.CreateIdentityCertificate*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_CreateIdentityCertificate_System_String_System_String_System_TimeSpan_System_Int32_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.CreateIdentityCertificate(System.String,System.String,System.TimeSpan,System.Int32)">
  CreateIdentityCertificate(string, string, TimeSpan, int)
  
  </h3>

  <div class="markdown level1 summary"><p>Creates a new MarymoorStudios Authentication Identity certificate.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static X509Certificate2 CreateIdentityCertificate(string name, string email, TimeSpan duration = default, int keySizeInBits = 2048)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>name</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The display name of the new identity.</p>
</dd>
    <dt><code>email</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The email address of the new identity.</p>
</dd>
    <dt><code>duration</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.timespan">TimeSpan</a></dt>
    <dd><p>The duration for the certificate (default: 1 year).</p>
</dd>
    <dt><code>keySizeInBits</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The desired key size.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.security.cryptography.x509certificates.x509certificate2">X509Certificate2</a></dt>
    <dd><p>The identity certificate.</p>
</dd>
  </dl>











  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_MakeX500DistinguishedName_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.MakeX500DistinguishedName*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_MakeX500DistinguishedName_System_String_System_String_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.MakeX500DistinguishedName(System.String,System.String)">
  MakeX500DistinguishedName(string, string)
  
  </h3>

  <div class="markdown level1 summary"><p>Creates an appropriate <a class="xref" href="MarymoorStudios.Core.Rpc.Identity.UserIdentity.html#MarymoorStudios_Core_Rpc_Identity_UserIdentity_X500DistinguishedName">X500DistinguishedName</a> for an identity.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static X500DistinguishedName MakeX500DistinguishedName(string name, string email)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>name</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The name of the identity.</p>
</dd>
    <dt><code>email</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The email associated with the identity.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.security.cryptography.x509certificates.x500distinguishedname">X500DistinguishedName</a></dt>
    <dd><p>The distinguished name.</p>
</dd>
  </dl>











  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_PublicKeyEquals_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.PublicKeyEquals*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_PublicKeyEquals_MarymoorStudios_Core_Rpc_Identity_UserIdentity_MarymoorStudios_Core_Rpc_Identity_UserIdentity_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.PublicKeyEquals(MarymoorStudios.Core.Rpc.Identity.UserIdentity,MarymoorStudios.Core.Rpc.Identity.UserIdentity)">
  PublicKeyEquals(UserIdentity, UserIdentity)
  
  </h3>

  <div class="markdown level1 summary"><p>Returns true if the two user identities have the same public key.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static bool PublicKeyEquals(UserIdentity i1, UserIdentity i2)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>i1</code> <a class="xref" href="MarymoorStudios.Core.Rpc.Identity.UserIdentity.html">UserIdentity</a></dt>
    <dd></dd>
    <dt><code>i2</code> <a class="xref" href="MarymoorStudios.Core.Rpc.Identity.UserIdentity.html">UserIdentity</a></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>











  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_ToString_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.ToString*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_ToString" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.ToString">
  ToString()
  
  </h3>

  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override string ToString()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>











  <a id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_TryCreateFromCert_" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.TryCreateFromCert*"></a>

  <h3 id="MarymoorStudios_Core_Rpc_Identity_UserIdentity_TryCreateFromCert_System_Security_Cryptography_X509Certificates_X509Certificate2_MarymoorStudios_Core_Rpc_Identity_UserIdentity__" data-uid="MarymoorStudios.Core.Rpc.Identity.UserIdentity.TryCreateFromCert(System.Security.Cryptography.X509Certificates.X509Certificate2,MarymoorStudios.Core.Rpc.Identity.UserIdentity@)">
  TryCreateFromCert(X509Certificate2, out UserIdentity)
  
  </h3>

  <div class="markdown level1 summary"><p>Creates a <a class="xref" href="MarymoorStudios.Core.Rpc.Identity.UserIdentity.html">UserIdentity</a> from a <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.security.cryptography.x509certificates.x509certificate">X509Certificate</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static bool TryCreateFromCert(X509Certificate2 cert, out UserIdentity identity)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>cert</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.security.cryptography.x509certificates.x509certificate2">X509Certificate2</a></dt>
    <dd><p>The certificate from which to extract an identity.</p>
</dd>
    <dt><code>identity</code> <a class="xref" href="MarymoorStudios.Core.Rpc.Identity.UserIdentity.html">UserIdentity</a></dt>
    <dd><p>If successful the identity extracted from the certificate.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p>True if a single identity was successfully determined from the provided certificate.</p>
<p>False if the certificate does not satisfy the MSC authentication protocol.</p>
</dd>
  </dl>












</article>



      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
